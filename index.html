<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB VTEC INSTITUTE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: white;
            min-height: 100vh;
            padding: 0;
            padding-bottom: 50px;
        }

        .institute-header {
            background: #261A4C;
            padding: 12px 0;
            text-align: center;
            border-bottom: 2.5px solid #FFD700;
        }

        .institute-title {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin: 0;
            letter-spacing: 2px;
            font-family: 'Georgia', 'Times New Roman', serif;
        }

        @media (max-width: 768px) {
            .institute-header {
                padding: 10px 0;
            }

            .institute-title {
                font-size: 20px;
                letter-spacing: 1px;
            }
        }

        .header {
            background: #261A4C;
            padding: 15px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            border-left: 2.5px solid #FFD700;
            border-right: 2.5px solid #FFD700;
            border-bottom: 2.5px solid #FFD700;
            border-top: 1px solid #FFD700;
        }

        .nav-menu {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(64, 64, 64, 0.85);
            padding: 12px 25px;
            border-radius: 25px;
            backdrop-filter: none;
            border: 2.5px solid #FFD700;
        }

        .hamburger {
            display: flex;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 8px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #FFD700;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .hamburger:hover span {
            background: white;
        }

        .nav-items {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex: 1;
            gap: 20px;
        }
        
        .nav-item {
            color: #FFD700;
            text-decoration: none;
            font-weight: 600;
            font-size: 18px;
            padding: 12px 24px;
            border-radius: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .nav-item:first-child {
            margin-right: auto;
        }

        .nav-item:last-child {
            margin-left: auto;
        }

        .nav-item:hover {
            background: rgba(139, 92, 246, 0.1);
            color: #FFD700;
        }

        .nav-item.active {
            background: #FFD700;
            color: #261A4C;
        }

        /* Sidebar styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background: #261A4C;
            border-right: 2.5px solid #FFD700;
            transition: left 0.3s ease;
            z-index: 1000;
            padding: 20px;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #FFD700;
        }

        .sidebar-title {
            color: #FFD700;
            font-size: 20px;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            color: #FFD700;
            font-size: 30px;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .close-btn:hover {
            color: white;
        }

        .sidebar-item {
            display: block;
            color: #FFD700;
            text-decoration: none;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .sidebar-item:hover {
            background: rgba(255, 215, 0, 0.1);
            color: white;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 999;
        }

        .overlay.active {
            display: block;
        }

        /* Footer styles */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #261A4C;
            border-top: 2.5px solid #FFD700;
            padding: 8px 0;
            text-align: center;
            z-index: 998;
        }

        .footer-text {
            color: #FFD700;
            font-size: 16px;
            font-weight: 600;
            margin: 0;
        }

        .footer-link {
            color: #22C55E;
            text-decoration: underline;
            font-weight: 700;
            font-size: 17px;
            transition: color 0.3s ease;
        }

        .footer-link:hover {
            color: #4ADE80;
        }

        @media (max-width: 768px) {
            .footer {
                padding: 6px 0;
            }

            .footer-text {
                font-size: 14px;
            }

            .footer-link {
                font-size: 15px;
            }
        }

        /* Word Database Styles */
        .word-database {
            display: none;
            padding: 30px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .word-database.active {
            display: block;
        }

        .db-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .db-title {
            font-size: 32px;
            color: #000000;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .db-subtitle {
            font-size: 20px;
            color: #4B5563;
            font-weight: 600;
        }

        .level-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        /* Outer shell ‚Äî IS the gradient border */
        .levels-outer-wrap {
            background: linear-gradient(45deg, #22C55E, #A855F7, #FFD700, #EF4444);
            border-radius: 20px;
            padding: 4px;
        }

        /* Inner white box */
        .levels-outer-container {
            background: white;
            border-radius: 17px;
            padding: 30px;
        }

        .container-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .container-title {
            font-size: 32px;
            color: #000000;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .container-subtitle {
            font-size: 20px;
            color: #4B5563;
            font-weight: 600;
        }

        .level-card {
            background: white;
            border: 2.5px solid #FFD700;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .level-card-emoji {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
        }

        .level-card h3 {
            color: #000000;
            font-size: 24px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .level-card p {
            color: #6B7280;
            font-size: 16px;
            font-weight: 500;
        }

        .words-view {
            display: none;
        }

        .words-view.active {
            display: block;
        }

        .back-button {
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(45deg, #22C55E, #A855F7, #FFD700, #EF4444) border-box;
            color: #261A4C;
            border: 3px solid transparent;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .words-header {
            background: white;
            border: 2.5px solid #FFD700;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .words-header h2 {
            color: #000000;
            font-size: 28px;
            margin: 0;
            font-weight: 700;
        }

        .search-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-box {
            padding: 10px 15px;
            border: 2px solid #FFD700;
            border-radius: 8px;
            font-size: 16px;
            width: 200px;
        }

        .search-button {
            background: #261A4C;
            color: white;
            border: 2px solid #FFD700;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .search-button:hover {
            background: #3730a3;
        }

        .word-count {
            color: #22C55E;
            font-size: 18px;
            font-weight: 600;
            margin: 10px 0 0 0;
        }

        .alphabet-filter {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin: 20px 0;
        }

        .letter-btn {
            background: #261A4C;
            color: #FFD700;
            border: 2px solid #FFD700;
            width: 45px;
            height: 45px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .letter-btn:hover,
        .letter-btn.active {
            background: #FFD700;
            color: #261A4C;
        }

        .words-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .word-item {
            background: white;
            border: 2px solid #FFD700;
            border-radius: 10px;
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
            color: #1F2937;
            transition: all 0.3s ease;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .word-item:hover {
            background: rgba(255, 215, 0, 0.15);
            border-color: #261A4C;
            transform: translateX(6px);
            box-shadow: 0 3px 12px rgba(38, 26, 76, 0.18);
        }

        .word-item:active {
            transform: translateX(3px);
            box-shadow: none;
        }

        /* ‚îÄ‚îÄ Definition Modal ‚îÄ‚îÄ */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.52);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 16px;
            backdrop-filter: blur(3px);
        }
        .modal-overlay.open { display: flex; }

        .modal {
            background: #fff;
            border-radius: 18px;
            width: 100%;
            max-width: 520px;
            max-height: 85vh;
            overflow-y: auto;
            border: 3px solid #FFD700;
            box-shadow: 0 12px 40px rgba(38,26,76,0.28);
            animation: modalPop 0.22s cubic-bezier(.34,1.56,.64,1) both;
            position: relative;
        }
        @keyframes modalPop {
            from { transform: scale(0.88); opacity: 0; }
            to   { transform: scale(1);    opacity: 1; }
        }

        .modal-close {
            position: absolute; top: 12px; right: 16px;
            background: none; border: none;
            font-size: 26px; color: #6B7280;
            cursor: pointer; line-height: 1;
            z-index: 1;
        }
        .modal-close:hover { color: #261A4C; }

        .modal-header {
            background: #261A4C;
            border-radius: 15px 15px 0 0;
            padding: 20px 22px 16px;
        }
        .modal-word {
            color: #FFD700;
            font-size: 30px;
            font-weight: 700;
            margin: 0;
            text-transform: capitalize;
        }
        .modal-close { color: #FFD700; }
        .modal-close:hover { color: #fff; }
        .modal-pronunciation {
            color: rgba(255,255,255,0.72);
            font-size: 15px;
            margin-top: 4px;
        }
        .modal-origin {
            color: rgba(255,255,255,0.6);
            font-size: 13px;
            margin-top: 3px;
        }

        .modal-body { padding: 18px 22px 22px; }

        .modal-pos-block { margin-bottom: 18px; }
        .modal-pos-label {
            display: inline-block;
            background: #261A4C;
            color: #FFD700;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 3px 10px;
            border-radius: 20px;
            margin-bottom: 8px;
        }
        .modal-definition {
            color: #1F2937;
            font-size: 15px;
            line-height: 1.55;
            margin-bottom: 6px;
        }
        .modal-example {
            color: #4B5563;
            font-size: 14px;
            font-style: italic;
            border-left: 3px solid #FFD700;
            padding-left: 10px;
            margin: 8px 0 10px;
        }

        .modal-syn-ant { display: flex; gap: 14px; flex-wrap: wrap; }
        .modal-syn, .modal-ant {
            flex: 1; min-width: 120px;
        }
        .modal-syn-title, .modal-ant-title {
            font-size: 12px; font-weight: 700;
            margin-bottom: 5px;
        }
        .modal-syn-title { color: #22C55E; }
        .modal-ant-title { color: #EF4444; }
        .modal-tags { display: flex; flex-wrap: wrap; gap: 6px; }
        .modal-tag {
            background: #f3f4f6;
            border-radius: 14px;
            padding: 3px 10px;
            font-size: 13px;
            color: #374151;
            font-weight: 600;
        }

        .modal-audio-row {
            margin-top: 14px;
            display: flex; gap: 10px; flex-wrap: wrap;
        }
        .modal-audio-btn {
            background: #261A4C; color: #FFD700;
            border: 2px solid #FFD700;
            border-radius: 10px;
            padding: 9px 18px;
            font-size: 14px; font-weight: 700;
            cursor: pointer;
            transition: all 0.25s ease;
            -webkit-tap-highlight-color: transparent;
        }
        .modal-audio-btn:hover {
            background: #FFD700; color: #261A4C;
        }
        .modal-audio-btn:active { transform: scale(0.94); }

        .modal-loading {
            text-align: center;
            padding: 40px 22px;
            color: #6B7280;
            font-size: 16px;
        }
        .modal-loading .spinner {
            width: 36px; height: 36px;
            border: 4px solid #e5e7eb;
            border-top-color: #FFD700;
            border-radius: 50%;
            animation: spin 0.7s linear infinite;
            margin: 0 auto 14px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .loading {
            text-align: center;
            color: #1F2937;
            font-size: 18px;
            padding: 40px;
        }

        @media (max-width: 768px) {
            .container-title {
                font-size: 24px;
            }

            .container-subtitle {
                font-size: 16px;
            }

            .db-title {
                font-size: 24px;
            }

            .db-subtitle {
                font-size: 16px;
            }

            .level-card h3 {
                font-size: 20px;
            }

            .header-top {
                flex-direction: column;
                align-items: flex-start;
            }

            .search-container {
                width: 100%;
            }

            .search-box {
                flex: 1;
            }

            .alphabet-filter {
                gap: 5px;
            }

            .letter-btn {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
        }

        /* Home Page Styles */
        .home-page {
            display: block;
            padding: 30px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .home-page.hidden {
            display: none;
        }

        /* Outer shell ‚Äî IS the gradient border */
        .home-container-wrap {
            background: linear-gradient(45deg, #22C55E, #A855F7, #FFD700, #EF4444);
            border-radius: 20px;
            padding: 4px; /* 4 px = border thickness */
        }

        /* Inner white box */
        .home-container {
            background: white;
            border-radius: 17px; /* 20 - 3 so it hugs the gradient neatly */
            padding: 40px;
            padding-bottom: 0;
            text-align: center;
            overflow: hidden; /* clips the button flush with rounded corners */
        }

        .home-title {
            font-size: 36px;
            color: #000000;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .home-description {
            font-size: 18px;
            color: #4B5563;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .whatsapp-button {
            display: block;
            width: calc(100% + 80px); /* 40px padding on each side */
            margin-left: -40px;
            background: #25D366;
            color: white;
            padding: 18px 30px;
            border: none;
            border-radius: 0 0 17px 17px; /* match inner container border-radius */
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            text-align: center;
            margin-top: 30px;
            margin-bottom: 0;
        }

        .whatsapp-button:hover {
            background: #20BA5A;
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.5);
        }

        

        @media (max-width: 768px) {
            .nav-menu {
                flex-wrap: nowrap;
                overflow: visible;
            }

            .hamburger {
                padding: 5px;
            }

            .hamburger span {
                width: 20px;
            }

            .nav-items {
                gap: 8px;
            }

            .nav-item {
                white-space: nowrap;
                font-size: 11px;
                padding: 5px 10px;
            }

            .nav-item:first-child {
                margin-right: 0;
            }

            .nav-item:last-child {
                margin-left: 0;
            }

            .home-container {
                padding: 30px 20px 0 20px;
            }

            .home-title {
                font-size: 28px;
            }

            .home-description {
                font-size: 16px;
            }

            .whatsapp-button {
                font-size: 16px;
                padding: 15px 20px;
                width: calc(100% + 40px); /* 20px padding on each side */
                margin-left: -20px;
            }
        }
    </style>
</head>
<body>
    <!-- Institute Header -->
    <div class="institute-header">
        <h1 class="institute-title">WEB VTEC INSTITUTE</h1>
    </div>

    <!-- Sidebar overlay -->
    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-title">MENU</span>
            <button class="close-btn" onclick="closeSidebar()">&times;</button>
        </div>
        <a href="javascript:void(0)" class="sidebar-item" onclick="showHome()">HOME</a>
        <a href="javascript:void(0)" class="sidebar-item" onclick="showWordDatabase()">WORD DATABASE</a>
        <a href="#" class="sidebar-item">CONTACT US</a>
        <a href="#" class="sidebar-item">ABOUT US</a>
    </div>

    <header class="header">
        <nav class="nav-menu">
            <div class="hamburger" onclick="openSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-items">
                <a href="javascript:void(0)" class="nav-item active" onclick="navTo(this,'home')">SPELLING</a>
                <a href="javascript:void(0)" class="nav-item" onclick="navTo(this,'tournaments')">TOURNAMENTS</a>
                <a href="javascript:void(0)" class="nav-item" onclick="navTo(this,'quiz')">QUIZ</a>
            </div>
        </nav>
    </header>

    <!-- Home Page Section -->
    <div class="home-page" id="homePage">
        <div class="home-container-wrap">
            <div class="home-container">
                <h1 class="home-title">WELCOME TO WEB VTEC INSTITUTE</h1>
                <p class="home-description">
                    Join our vibrant learning community! Stay connected with the latest updates, 
                    challenges, tournaments, and educational content. Click the button below to 
                    join our WhatsApp channel and never miss an update!
                </p>
                <a href="https://whatsapp.com/channel/0029Vb7tQ3tEVccTSyrNHY2L" target="_blank" class="whatsapp-button">
                    JOIN OUR WHATSAPP CHANNEL
                </a>
            </div>
        </div>
    </div>

    <!-- Coming-Soon placeholder (TOURNAMENTS / QUIZ) -->
    <div id="comingSoon" style="display:none; padding:30px 20px; max-width:600px; margin:0 auto; text-align:center;">
        <div style="background:white; border-radius:20px; padding:60px 30px; border:2.5px solid #FFD700;
                    box-shadow:0 0 20px rgba(34,197,94,0.4), 0 0 30px rgba(168,85,247,0.4);">
            <div style="font-size:48px; margin-bottom:15px;">üöß</div>
            <h2 id="comingSoonTitle" style="color:#261A4C; font-size:28px; margin-bottom:12px;"></h2>
            <p style="color:#6B7280; font-size:17px; line-height:1.5;">This section is coming soon.<br>Stay tuned for exciting updates!</p>
        </div>
    </div>

    <!-- Word Database Section -->
    <div class="word-database" id="wordDatabase">
        <!-- Level Selection View -->
        <div id="levelSelection">
            <div class="levels-outer-wrap">
                <div class="levels-outer-container">
                    <div class="container-header">
                        <div class="container-title">üìö CHOOSE YOUR LEVEL</div>
                        <div class="container-subtitle">Select a difficulty level to access words:</div>
                    </div>

                    <div class="level-container">
                        <div class="level-card" onclick="loadLevel('beginner')">
                            <span class="level-card-emoji">üå±</span>
                            <h3>BEGINNER</h3>
                            <p>Foundation words for new learners</p>
                        </div>
                        <div class="level-card" onclick="loadLevel('intermediate')">
                            <span class="level-card-emoji">üöÄ</span>
                            <h3>INTERMEDIATE</h3>
                            <p>Expand your vocabulary</p>
                        </div>
                        <div class="level-card" onclick="loadLevel('advanced')">
                            <span class="level-card-emoji">üèÜ</span>
                            <h3>ADVANCED</h3>
                            <p>Challenge yourself with complex words</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Words View -->
        <div class="words-view" id="wordsView">
            <button class="back-button" onclick="backToLevels()">‚Üê Back to Levels</button>
            
            <div class="words-header">
                <div class="header-top">
                    <h2 id="levelTitle">üìö LEVEL 1: FOUNDATION</h2>
                    <div class="search-container">
                        <input type="text" class="search-box" id="searchBox" placeholder="Search words..." oninput="filterWords()">
                        <button class="search-button" onclick="filterWords()">Search</button>
                    </div>
                </div>
                <div class="word-count" id="wordCount">‚úÖ Loading words...</div>
            </div>

            <div class="alphabet-filter" id="alphabetFilter"></div>
            
            <div class="words-list" id="wordsList"></div>
        </div>
    </div>

    <script>
        // ‚îÄ‚îÄ CONFIG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        // Replace with your actual Cloud Run endpoint URL.
        // Example: https://your-project-xxxxx-uc.a.run.app/definition
        const CLOUD_RUN_URL = 'https://YOUR_CLOUD_RUN_URL/definition';

        const WORD_DOCS = {
            beginner:     'https://docs.google.com/document/d/1L37P-Xsc0IItO3Y47IF0pYvN4zmLDZCYKj6GpPLd1lQ/export?format=txt',
            intermediate: 'https://docs.google.com/document/d/107HFdy6lSdWVJdXllzrRgR6y3oauXIjZJ_3YXFUH0us/export?format=txt',
            advanced:     'https://docs.google.com/document/d/1u1K2TtCxdVyhfRJqdq5TNfEJEBwbN7pja_QNxoKSTn4/export?format=txt'
        };

        let allWords      = [];
        let filteredWords = [];
        let currentLevel  = '';
        let selectedLetter = '';

        // ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function setActive(element) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            element.classList.add('active');
        }

        function navTo(element, page) {
            setActive(element);
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('wordDatabase').classList.remove('active');
            document.getElementById('levelSelection').style.display = 'none';
            document.getElementById('wordsView').classList.remove('active');
            document.getElementById('comingSoon').style.display = 'none';

            if (page === 'home') {
                document.getElementById('homePage').classList.remove('hidden');
            } else if (page === 'wordDatabase') {
                document.getElementById('wordDatabase').classList.add('active');
                document.getElementById('levelSelection').style.display = 'block';
            } else {
                showComingSoon(page);
            }
        }

        function showComingSoon(page) {
            const labels = { tournaments: 'TOURNAMENTS', quiz: 'QUIZ' };
            document.getElementById('comingSoonTitle').textContent = labels[page] || page.toUpperCase();
            document.getElementById('comingSoon').style.display = 'block';
        }

        function openSidebar()  { document.getElementById('sidebar').classList.add('open');  document.getElementById('overlay').classList.add('active'); }
        function closeSidebar() { document.getElementById('sidebar').classList.remove('open'); document.getElementById('overlay').classList.remove('active'); }

        function showHome() {
            navTo(document.querySelector('.nav-item:first-child'), 'home');
            closeSidebar();
        }

        function showWordDatabase() {
            const spellingNav = document.querySelector('.nav-item:first-child');
            setActive(spellingNav);
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('wordDatabase').classList.add('active');
            document.getElementById('levelSelection').style.display = 'block';
            document.getElementById('wordsView').classList.remove('active');
            document.getElementById('comingSoon').style.display = 'none';
            closeSidebar();
        }

        function backToLevels() {
            document.getElementById('levelSelection').style.display = 'block';
            document.getElementById('wordsView').classList.remove('active');
            allWords = []; filteredWords = [];
            currentLevel = ''; selectedLetter = '';
        }

        // ‚îÄ‚îÄ LEVEL LOAD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        async function loadLevel(level) {
            currentLevel = level;
            document.getElementById('levelSelection').style.display = 'none';
            document.getElementById('wordsView').classList.add('active');

            const titles = {
                beginner:     'üìö LEVEL 1: FOUNDATION',
                intermediate: 'üìö LEVEL 2: INTERMEDIATE',
                advanced:     'üìö LEVEL 3: ADVANCED'
            };
            document.getElementById('levelTitle').textContent = titles[level];
            document.getElementById('wordCount').textContent  = '‚è≥ Loading words...';

            createAlphabetFilter();

            const url = WORD_DOCS[level];
            if (!url) {
                document.getElementById('wordCount').textContent = '‚ùå No word list configured for this level yet. Check back soon!';
                document.getElementById('wordsList').innerHTML   = '<div class="loading">The administrator needs to add a Google Doc URL for this level.</div>';
                return;
            }

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                const text = await response.text();
                allWords = text.split('\n').filter(w => w.trim()).map(w => w.trim());

                document.getElementById('wordCount').textContent =
                    `‚úÖ ${allWords.length} ${level.toUpperCase()} words loaded! Click a word to see its definition.`;

                // ‚îÄ‚îÄ AUTO-SELECT "A" ‚îÄ‚îÄ
                selectedLetter = 'A';
                highlightLetterBtn('A');
                filteredWords = allWords.filter(w => w.charAt(0).toUpperCase() === 'A');
                displayWords();
            } catch (error) {
                document.getElementById('wordCount').textContent = '‚ùå Could not load words. Please check your connection and try again.';
                document.getElementById('wordsList').innerHTML   = '<div class="loading">Something went wrong while fetching the word list.</div>';
                console.error('Error loading words:', error);
            }
        }

        // ‚îÄ‚îÄ ALPHABET FILTER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function createAlphabetFilter() {
            const filterDiv = document.getElementById('alphabetFilter');
            filterDiv.innerHTML = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('').map(l =>
                `<button class="letter-btn${l === 'A' ? ' active' : ''}" onclick="filterByLetter('${l}')">${l}</button>`
            ).join('');
        }

        function highlightLetterBtn(letter) {
            document.querySelectorAll('.letter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === letter);
            });
        }

        function filterByLetter(letter) {
            selectedLetter = selectedLetter === letter ? '' : letter;
            highlightLetterBtn(selectedLetter);
            filterWords();
        }

        function filterWords() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            filteredWords = allWords.filter(word => {
                const matchesLetter = !selectedLetter || word.charAt(0).toUpperCase() === selectedLetter;
                const matchesSearch = !searchTerm || word.toLowerCase().includes(searchTerm);
                return matchesLetter && matchesSearch;
            });
            displayWords();
        }

        // ‚îÄ‚îÄ DISPLAY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function displayWords() {
            const wordsListDiv = document.getElementById('wordsList');
            if (filteredWords.length === 0) {
                wordsListDiv.innerHTML = '<div class="loading">No words found.</div>';
                return;
            }
            const sorted = [...filteredWords].sort((a, b) => a.localeCompare(b));
            wordsListDiv.innerHTML = sorted.map(word =>
                `<div class="word-item" onclick="openDefinition('${word.replace(/'/g, "\\'")}')">${word}</div>`
            ).join('');
        }

        // ‚îÄ‚îÄ DEFINITION MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function openDefinition(word) {
            const modal = document.getElementById('modal');
            modal.innerHTML =
                '<button class="modal-close" onclick="closeModalDirect()">&times;</button>' +
                '<div class="modal-loading"><div class="spinner"></div>Fetching definition for <strong>' + word + '</strong>‚Ä¶</div>';
            document.getElementById('modalOverlay').classList.add('open');
            fetchDefinition(word);
        }

        async function fetchDefinition(word) {
            try {
                const res = await fetch(CLOUD_RUN_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ data: { action: 'getWordDefinition', word: word } })
                });
                if (!res.ok) throw new Error(`Cloud Run returned ${res.status}`);
                const data = await res.json();
                renderModal(word, data.result);
            } catch (err) {
                console.error('Definition fetch error:', err);
                document.getElementById('modal').innerHTML =
                    '<button class="modal-close" onclick="closeModalDirect()">&times;</button>' +
                    '<div class="modal-header"><h2 class="modal-word">' + word + '</h2></div>' +
                    '<div class="modal-body" style="text-align:center; padding:30px 22px;">' +
                        '<p style="color:#EF4444; font-weight:600; margin-bottom:8px;">‚ö†Ô∏è Could not fetch definition</p>' +
                        '<p style="color:#6B7280; font-size:14px;">Make sure your Cloud Run endpoint is running and the CLOUD_RUN_URL is set correctly.</p>' +
                    '</div>';
            }
        }

        /*
         * Expected JSON shape from Cloud Run / OpenAI:
         * {
         *   "phonetic": "/…ôÀàb√¶nd…ôn/",
         *   "origin": "English",
         *   "meanings": [
         *     {
         *       "partOfSpeech": "verb",
         *       "definition": "...",
         *       "example": "...",
         *       "synonyms": ["forsake", "desert"],
         *       "antonyms": ["retain", "keep"]
         *     },
         *     { ... }   ‚Üê can have multiple (verb + noun, etc.)
         *   ]
         * }
         */
        function renderModal(word, data) {
            const pronunciation = data.phonetic || '';
            const origin        = data.origin        || '';
            const meanings      = data.meanings      || [];

            let html =
                '<button class="modal-close" onclick="closeModalDirect()">&times;</button>' +
                '<div class="modal-header">' +
                    '<h2 class="modal-word">' + word + '</h2>' +
                    (pronunciation ? '<div class="modal-pronunciation">' + pronunciation + '</div>' : '') +
                    (origin        ? '<div class="modal-origin">üìú Origin: ' + origin + '</div>'    : '') +
                '</div>' +
                '<div class="modal-body">';

            meanings.forEach(function(m) {
                html +=
                    '<div class="modal-pos-block">' +
                        '<span class="modal-pos-label">' + (m.partOfSpeech || '') + '</span>' +
                        '<p class="modal-definition">' + (m.definition || '') + '</p>' +
                        (m.example ? '<p class="modal-example">"' + m.example + '"</p>' : '');

                // synonyms + antonyms row
                if ((m.synonyms && m.synonyms.length) || (m.antonyms && m.antonyms.length)) {
                    html += '<div class="modal-syn-ant">';
                    if (m.synonyms && m.synonyms.length) {
                        html +=
                            '<div class="modal-syn">' +
                                '<div class="modal-syn-title">üìö Synonyms</div>' +
                                '<div class="modal-tags">' +
                                    m.synonyms.map(s => '<span class="modal-tag">' + s + '</span>').join('') +
                                '</div>' +
                            '</div>';
                    }
                    if (m.antonyms && m.antonyms.length) {
                        html +=
                            '<div class="modal-ant">' +
                                '<div class="modal-ant-title">üîÑ Antonyms</div>' +
                                '<div class="modal-tags">' +
                                    m.antonyms.map(a => '<span class="modal-tag">' + a + '</span>').join('') +
                                '</div>' +
                            '</div>';
                    }
                    html += '</div>';
                }
                html += '</div>'; // end pos-block
            });

            // Listen + Speak buttons
            html +=
                '<div class="modal-audio-row">' +
                    '<button class="modal-audio-btn" onclick="speakWord(\'' + word + '\', true)">üîä LISTEN</button>' +
                    '<button class="modal-audio-btn" onclick="startPractice(\'' + word + '\')">üé§ PRACTICE SPEAKING</button>' +
                '</div>';

            html += '</div>'; // end modal-body
            document.getElementById('modal').innerHTML = html;
        }

        // ‚îÄ‚îÄ MODAL CLOSE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function closeModal(e) {
            if (e.target === document.getElementById('modalOverlay')) closeModalDirect();
        }
        function closeModalDirect() {
            document.getElementById('modalOverlay').classList.remove('open');
            window.speechSynthesis && window.speechSynthesis.cancel();
        }
        // Close on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModalDirect();
        });

        // ‚îÄ‚îÄ SPEECH (Listen) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function speakWord(word, loud) {
            if (!window.speechSynthesis) { alert('Speech synthesis not supported in this browser.'); return; }
            window.speechSynthesis.cancel();
            const utt = new SpeechSynthesisUtterance(word);
            utt.rate  = loud ? 0.75 : 1;
            utt.pitch = 1;
            utt.lang  = 'en-US';
            window.speechSynthesis.speak(utt);
        }

        // ‚îÄ‚îÄ SPEECH (Practice / Recognition) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function startPractice(word) {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert('Speech recognition is not supported in this browser.\nPlease try Chrome or Edge.');
                return;
            }
            // First speak the word so user hears it
            speakWord(word, true);

            setTimeout(function() {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                recognition.lang        = 'en-US';
                recognition.interimResults = false;
                recognition.maxAlternatives = 3;

                // Show feedback in the button
                const btn = document.querySelector('.modal-audio-btn:last-child');
                if (btn) btn.textContent = 'üî¥ Listening‚Ä¶';

                recognition.onresult = function(event) {
                    const spoken = event.results[0][0].transcript.trim().toLowerCase();
                    const target = word.toLowerCase();
                    if (btn) btn.textContent = 'üé§ PRACTICE SPEAKING';

                    if (spoken === target) {
                        alert('‚úÖ Correct! You said "' + spoken + '" perfectly!');
                    } else {
                        alert('‚ùå You said: "' + spoken + '"\n‚úÖ Expected: "' + target + '"\nTry again!');
                    }
                };

                recognition.onerror = function() {
                    if (btn) btn.textContent = 'üé§ PRACTICE SPEAKING';
                    alert('Could not recognize speech. Please try again in a quiet environment.');
                };

                recognition.onend = function() {
                    if (btn) btn.textContent = 'üé§ PRACTICE SPEAKING';
                };

                recognition.start();
            }, 1200); // small delay so the Listen audio finishes first
        }
    </script>

    <!-- Definition Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" id="modal">
            <button class="modal-close" onclick="closeModalDirect()">&times;</button>
            <!-- filled by JS -->
        </div>
    </div>

    <!-- Footer Banner -->
    <footer class="footer">
        <p class="footer-text">Created by <a href="https://webvtec.com" target="_blank" class="footer-link">webvtec.com</a></p>
    </footer>
</body>
</html>
